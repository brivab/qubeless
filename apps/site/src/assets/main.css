@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap');
@import '../styles/themes.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-family: 'Space Grotesk', 'Helvetica Neue', sans-serif;
  }

  *,
  *::before,
  *::after {
    @apply box-border;
  }

  body {
    @apply m-0 min-h-screen bg-bg-primary text-text-primary antialiased transition-[background-color,color] duration-theme;
  }

  a {
    @apply text-inherit no-underline;
  }
}

@layer components {
  /* App Shell */
  .app-shell {
    @apply grid grid-cols-[260px_1fr] min-h-screen w-full;
  }

  /* Sidebar */
  .sidebar {
    @apply bg-gradient-sidebar text-sidebar-text p-6 flex flex-col gap-6;
    @apply transition-[transform,box-shadow,background] duration-200 sticky top-0 h-screen self-start;
  }

  .sidebar .brand {
    @apply font-bold tracking-wide text-xl;
  }

  .sidebar nav {
    @apply flex flex-col gap-3 flex-1 overflow-y-auto pr-1;
  }

  .nav-link {
    @apply px-3.5 py-3 rounded-btn text-sidebar-text-secondary;
    @apply transition-[background,transform,color] duration-200;
  }

  .nav-link.active {
    @apply bg-sidebar-nav-hover;
  }

  .nav-link:hover {
    @apply translate-x-0.5;
  }

  /* Content */
  .content {
    @apply px-11 py-8;
  }

  /* Card */
  .card {
    @apply bg-gradient-card border-2 border-card-border rounded-card p-5;
    @apply shadow-card transition-all duration-200;
  }

  .card:hover {
    @apply border-card-border-hover shadow-card-hover;
  }

  .card h3 {
    @apply mt-0 mb-4;
  }

  .card > *:last-child {
    @apply mb-0;
  }

  /* Page */
  .page {
    @apply flex flex-col gap-4;
  }

  .page-header {
    @apply flex justify-between items-center mb-1 gap-4 flex-wrap;
  }

  .section-header {
    @apply flex justify-between items-center gap-2.5 mb-4;
  }

  /* Buttons */
  button {
    @apply bg-gradient-btn text-white border-0 rounded-btn px-[18px] py-3;
    @apply font-bold text-sm cursor-pointer transition-all duration-200 shadow-btn;
  }

  button:hover:not(:disabled) {
    @apply -translate-y-0.5 shadow-btn-hover;
  }

  button:active:not(:disabled) {
    @apply translate-y-0 shadow-btn-active;
  }

  button:disabled {
    @apply opacity-60 cursor-not-allowed shadow-none transform-none;
  }

  .ghost-button {
    @apply bg-gradient-ghost text-ghost-text border border-ghost-border rounded-btn;
    @apply px-3.5 py-2.5 font-semibold cursor-pointer transition-all duration-200 shadow-ghost;
  }

  .ghost-button:hover:not(:disabled) {
    @apply bg-gradient-ghost-hover border-ghost-border-hover shadow-ghost-hover -translate-y-px;
  }

  .ghost-button.compact {
    @apply px-2.5 py-1.5 text-[13px];
  }

  /* Inputs */
  input:not([type='checkbox']):not([type='radio']),
  select,
  textarea {
    @apply w-full px-3.5 py-3 rounded-btn border-2 border-input-border;
    @apply text-[15px] bg-input-bg text-text-primary appearance-none font-sans;
    @apply transition-all duration-200;
  }

  input:not([type='checkbox']):not([type='radio']):focus,
  select:focus,
  textarea:focus {
    @apply outline-none border-input-border-focus shadow-input-focus bg-input-bg;
  }

  input:not([type='checkbox']):not([type='radio']):hover:not(:disabled),
  select:hover:not(:disabled),
  textarea:hover:not(:disabled) {
    @apply border-input-border-hover;
  }

  input[type='checkbox'],
  input[type='radio'] {
    @apply w-auto h-auto cursor-pointer;
  }

  textarea {
    @apply resize-y min-h-[100px] leading-normal;
  }

  select {
    @apply pr-10;
    background-image: linear-gradient(45deg, transparent 50%, var(--select-arrow) 50%),
      linear-gradient(135deg, var(--select-arrow) 50%, transparent 50%),
      linear-gradient(to right, transparent, transparent);
    background-position: calc(100% - 20px) calc(50% - 3px), calc(100% - 14px) calc(50% - 3px), 100% 0;
    background-size: 6px 6px, 6px 6px, 2.5em 3.5em;
    background-repeat: no-repeat;
  }

  label {
    @apply font-semibold text-sm text-text-secondary block mb-2 tracking-wide transition-colors duration-theme;
  }

  .form-group {
    @apply mb-4;
  }

  /* Login */
  .login-wrapper {
    @apply min-h-screen grid place-items-center p-5 transition-[background] duration-theme;
    background: radial-gradient(circle at 10% 20%, var(--login-gradient-1), transparent 25%),
      radial-gradient(circle at 90% 10%, var(--login-gradient-2), transparent 20%), var(--bg-primary);
  }

  .login-card {
    @apply w-full max-w-[420px];
  }

  .login-tabs {
    @apply flex gap-2 mb-4 border-b-2 border-border-primary;
  }

  .login-tab {
    @apply flex-1 px-4 py-2.5 bg-transparent border-0 border-b-2 border-transparent;
    @apply font-semibold cursor-pointer transition-all duration-200;
    color: var(--tab-text);
  }

  .login-tab:hover {
    color: var(--tab-text-hover);
    background: var(--tab-bg-hover);
  }

  .login-tab.active {
    color: var(--tab-text-active);
    border-bottom-color: var(--tab-border-active);
  }

  .login-sso {
    @apply mt-5 pt-4 border-t border-border-primary;
  }

  .login-sso-title {
    @apply text-xs font-bold tracking-[0.12em] uppercase text-text-muted mb-1.5 transition-colors duration-theme;
  }

  .login-sso-actions {
    @apply grid gap-2.5;
  }

  .login-sso-actions button {
    @apply w-full;
  }

  /* Unified Tabs */
  .main-tabs {
    @apply flex gap-2 border-b-2 mb-4 transition-colors duration-theme;
    border-color: var(--tab-border);
  }

  .main-tab-button {
    @apply border-0 border-b-[3px] border-transparent rounded-none px-5 py-3;
    @apply bg-transparent font-semibold text-sm cursor-pointer;
    @apply transition-all duration-200 tracking-wide;
    color: var(--tab-text);
  }

  .main-tab-button:hover:not(.active) {
    color: var(--tab-text-hover);
    background: linear-gradient(135deg, var(--tab-hover-bg-start) 0%, var(--tab-hover-bg-end) 100%);
  }

  .main-tab-button.active {
    @apply bg-transparent;
    color: var(--tab-text-active);
    border-bottom-color: var(--tab-border-active);
  }

  .tab-content {
    animation: fadeIn 0.25s ease-in;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Header & Misc */
  .header-bar {
    @apply flex items-center justify-between mb-6;
  }

  .muted {
    @apply text-text-tertiary text-sm transition-colors duration-theme;
  }

  .close-btn {
    @apply border-0 text-sidebar-text;
  }

  /* Mobile */
  .mobile-header {
    @apply hidden items-center justify-between px-4 py-3.5;
    @apply bg-[var(--sidebar-bg-start)] text-sidebar-text sticky top-0 z-[3];
    @apply transition-[background,color] duration-theme;
  }

  .mobile-logout,
  .mobile-only {
    @apply hidden;
  }

  .backdrop {
    @apply hidden fixed inset-0 bg-black/35 z-[1];
  }

  /* Responsive */
  @media (max-width: 900px) {
    .app-shell {
      @apply flex flex-col;
    }

    .sidebar {
      @apply fixed top-0 left-0 h-screen w-[260px] z-[3];
      @apply -translate-x-full shadow-[8px_0_24px_rgba(0,0,0,0.16)] p-5;
    }

    .sidebar.open {
      @apply translate-x-0;
    }

    .sidebar-top {
      @apply w-full flex items-center justify-between;
    }

    .sidebar nav {
      @apply flex-col gap-3 w-full;
    }

    .nav-link {
      @apply px-3.5 py-3 border border-sidebar-nav-border bg-sidebar-nav-bg;
    }

    .content {
      @apply px-4 py-5 pb-7;
    }

    .header-bar {
      @apply flex-col items-start gap-2;
    }

    .card {
      @apply p-4;
    }

    .login-wrapper {
      @apply p-4;
    }

    .login-card {
      @apply w-full max-w-[420px];
    }

    .mobile-header {
      @apply flex;
    }

    .backdrop {
      @apply block;
    }

    .mobile-logout,
    .mobile-only {
      @apply inline-flex;
    }
  }

  @media (max-width: 600px) {
    .nav-link {
      @apply whitespace-nowrap;
    }

    .sidebar button {
      @apply w-full;
    }
  }
}
